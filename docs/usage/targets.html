<!DOCTYPE html>
<html class="writer-html5" lang="en">
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Targets &mdash; mercure Version 0.4.0-beta.4 documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css" />
      <link rel="stylesheet" type="text/css" href="../_static/custom.css" />

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../_static/doctools.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Modules" href="modules.html" />
    <link rel="prev" title="Usage" href="index.html" />
<a href="https://mercure-imaging.zulipchat.com" target="_none" class="chat-button" title="Open mercure online community">Open Chat</a>

</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html">
            
              <img src="../_static/mercure_logo_w.png" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                Version 0.4.0-beta.4
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
<li class="toctree-l1"><a class="reference external" href="https://github.com/mercure-imaging/mercure">github.com/mercure-imaging/mercure</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">User Guide</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../intro.html">What is mercure?</a></li>
<li class="toctree-l1"><a class="reference internal" href="../quickstart.html">Quick Start</a></li>
<li class="toctree-l1"><a class="reference internal" href="../install.html">Installation</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Usage</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">Targets</a></li>
<li class="toctree-l2"><a class="reference internal" href="modules.html">Modules</a></li>
<li class="toctree-l2"><a class="reference internal" href="rules.html">Rules</a></li>
<li class="toctree-l2"><a class="reference internal" href="queue.html">Queue Management</a></li>
<li class="toctree-l2"><a class="reference internal" href="query.html">Query Tool</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#web-interface">Web Interface</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#user-management">User Management</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#system-status-and-control">System Status and Control</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../advanced.html">Advanced Topics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../monitoring.html">Monitoring</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dashboards.html">Dashboard Gallery</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../faq.html">FAQ</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Modules</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../modules.html">Module Development</a></li>
<li class="toctree-l1"><a class="reference internal" href="../module_list.html">Existing Modules</a></li>
<li class="toctree-l1"><a class="reference internal" href="../anonymizer.html">Anonymizer</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dcmannotate.html">DCMAnnotate</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Support</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../support.html">Discussion Board</a></li>
<li class="toctree-l1"><a class="reference internal" href="../releases.html">Release History</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Developer Information</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../environment.html">Development Environment</a></li>
<li class="toctree-l1"><a class="reference internal" href="../source/index.html">Code Documentation</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">mercure</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content style-external-links">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="index.html">Usage</a></li>
      <li class="breadcrumb-item active">Targets</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="targets">
<h1>Targets<a class="headerlink" href="#targets" title="Permalink to this heading"></a></h1>
<nav class="contents local" id="contents">
<ul class="simple">
<li><p><a class="reference internal" href="#overview" id="id2">Overview</a></p></li>
<li><p><a class="reference internal" href="#dicom" id="id3">DICOM</a></p></li>
<li><p><a class="reference internal" href="#dicomweb" id="id4">DICOMWeb</a></p></li>
<li><p><a class="reference internal" href="#folder" id="id5">Folder</a></p></li>
<li><p><a class="reference internal" href="#rsync" id="id6">rsync</a></p></li>
<li><p><a class="reference internal" href="#sftp" id="id7">SFTP</a></p></li>
<li><p><a class="reference internal" href="#s3" id="id8">S3</a></p></li>
<li><p><a class="reference internal" href="#xnat" id="id9">XNAT</a></p></li>
</ul>
</nav>
<section id="overview">
<h2><a class="toc-backref" href="#id2" role="doc-backlink">Overview</a><a class="headerlink" href="#overview" title="Permalink to this heading"></a></h2>
<p>Targets define connections to external data storage locations. These are used to send and <a class="reference internal" href="query.html"><span class="doc">retrieve</span></a> DICOM studies.</p>
<p>Target nodes can be defined and configured on the “Settings &gt; Targets” page. The first page shows an overview of the currently configured targets. By clicking on an individual item, you can see the target details (e.g., IP address and port). You can test if the target can be reached by clicking the “Test” button, which will try to ping the server and check the connection.</p>
<a class="border reference internal image-reference" href="../_images/targets.png"><img alt="../_images/targets.png" class="border align-center" src="../_images/targets.png" style="width: 550px;" /></a>
<p>Click the “Add” button to create a new target. This can be done during normal operation of the server, i.e. it is not necessary to stop any of the services for adding new targets.</p>
<a class="border reference internal image-reference" href="../_images/target_edit.png"><img alt="../_images/target_edit.png" class="border align-center" src="../_images/target_edit.png" style="width: 550px;" /></a>
<p>After choosing a unique name for the target, you can edit the target settings.</p>
<table class="docutils align-default" id="id1">
<caption><span class="caption-text">Target Types</span><a class="headerlink" href="#id1" title="Permalink to this table"></a></caption>
<thead>
<tr class="row-odd"><th class="head"><p>Type</p></th>
<th class="head"><p>Push</p></th>
<th class="head"><p>Pull (Query)</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>DICOM</p></td>
<td><p>Y</p></td>
<td><p>Y</p></td>
</tr>
<tr class="row-odd"><td><p>DICOM+TLS</p></td>
<td><p>Y</p></td>
<td><p>N</p></td>
</tr>
<tr class="row-even"><td><p>DICOMWeb</p></td>
<td><p>Y</p></td>
<td><p>Y</p></td>
</tr>
<tr class="row-odd"><td><p>Folder</p></td>
<td><p>Y</p></td>
<td><p>N (but see DICOMWeb)</p></td>
</tr>
<tr class="row-even"><td><p>rsync</p></td>
<td><p>Y</p></td>
<td><p>N</p></td>
</tr>
<tr class="row-odd"><td><p>S3</p></td>
<td><p>Y</p></td>
<td><p>N</p></td>
</tr>
<tr class="row-even"><td><p>SFTP</p></td>
<td><p>Y</p></td>
<td><p>N</p></td>
</tr>
<tr class="row-odd"><td><p>XNAT</p></td>
<td><p>Y</p></td>
<td><p>N</p></td>
</tr>
</tbody>
</table>
<section id="direction">
<h3>Direction<a class="headerlink" href="#direction" title="Permalink to this heading"></a></h3>
<p>The default direction, “store”, is available on all targets. This indicates that this target can be used at a routing target.</p>
<p>“Query” indicates that this target can only be used as datasource in the Query tool. This should be used for services that cannot or should not be sent to, but can be queried. It is currently available for DICOM and DICOMWeb targets.</p>
<p>“both” indicates that this target can be used in both situations.</p>
</section>
<section id="information">
<h3>Information<a class="headerlink" href="#information" title="Permalink to this heading"></a></h3>
<p>On the “Information” tab, you can add information for documentation purpose, including a contact e-mail address (so that it can be looked up who should be contacted if problems with the target occur) and a description of the target.</p>
</section>
</section>
<section id="dicom">
<h2><a class="toc-backref" href="#id3" role="doc-backlink">DICOM</a><a class="headerlink" href="#dicom" title="Permalink to this heading"></a></h2>
<p>For DICOM targets, enter the parameters of the DICOM node, including the IP address, port, the target AET (application entity title) that should be called on the receiver side, and the source AET (AEC) with which mercure identifies itself to the target. By clicking the option “Pass Incoming Value”, the outgoing AET (or AEC) value will be set to the value of the received DICOM series. This allows preserving the original AET/AEC values, so that mercure can be placed transparently between an imaging device and a target DICOM node (e.g., for modifying certain DICOM tags or similar).</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>Some DICOM nodes require that you set a specific target AET, while other systems ignore this setting. Likewise, some DICOM nodes only accept images from a sender who’s source AET is known, while others ignore the value. Please check with the vendor/operator of your DICOM node which values are required.</p>
</div>
<p>For DICOM TLS targets, enter the TLS client key path, TLS client certificate path, and the path to the Certificate Authority (CA) certificate file. You will need to add these files to your mercure installation, e.g. in <cite>/opt/mercure/certs</cite>.</p>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>Support for DICOM TLS transfers is still experimental and should be used with care.</p>
</div>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>Due to an incompatibility in DCMTK v3.6.4 and OpenSSL v1.1.1, the versions supported by Ubuntu 20.04, support for DICOM TLS targets is only available when mercure runs under Ubuntu 22.04 or newer.</p>
</div>
</section>
<section id="dicomweb">
<h2><a class="toc-backref" href="#id4" role="doc-backlink">DICOMWeb</a><a class="headerlink" href="#dicomweb" title="Permalink to this heading"></a></h2>
<p>The DICOMWeb target allows sending and querying DICOM images over a RESTful interface (also known as WADO). It can be used with any DICOMWeb-compliant server. It supports traditional basic authentication (username and password) as well as token-based authentication.</p>
<p>The DICOMWeb target additionally supports querying a local folder of dicoms. To use this, specify the folder with <code class="docutils literal notranslate"><span class="pre">file://</span></code>, eg <code class="docutils literal notranslate"><span class="pre">file///media/dicoms</span></code>. If mercure has write permissions, it will generate a sqlite index, otherwise it will re-index it on each query. Needless to say, if the folder is too large, this would make queries very slow and resource intensive.</p>
</section>
<section id="folder">
<h2><a class="toc-backref" href="#id5" role="doc-backlink">Folder</a><a class="headerlink" href="#folder" title="Permalink to this heading"></a></h2>
<p>The folder target allows storing images (or results) inside a folder on the the mercure server (either on a local drive or mounted network share). When running a Docker-based mercure installation, this folder will be inside the dispatcher container. Thus, for this folder to be available and persist on the base system, the Docker Compose configuration must map this folder to a Docker volume or a folder in the base filesystem.</p>
<p>The “Exclusion Filter” option is a comma-separated list of <a class="reference external" href="https://docs.python.org/3/library/shutil.html#copytree-example">glob expressions</a> , which allows specifying files to be ignored. For instance, if a processing step produces dicoms, pngs and json, <code class="docutils literal notranslate"><span class="pre">*.png,*.json</span></code> will skip the png and json files from being sent.</p>
</section>
<section id="rsync">
<h2><a class="toc-backref" href="#id6" role="doc-backlink">rsync</a><a class="headerlink" href="#rsync" title="Permalink to this heading"></a></h2>
<p>The rsync target allows storing files on a remote Linux server using the rsync protocol. This is useful for transferring large files or directories efficiently. The rsync connection will use certificate-based authentication if possible, but you can also specify a username and password if necessary.</p>
<p>If the “Execute shell command after transfer” option is set, mercure will attempt to log into the server via SSH and execute a script named <cite>mercure_complete.sh</cite> in the target folder. This allows triggering processing algorithms on the remote Linux server after all images have been transferred. The command will be executed as</p>
<p><code class="docutils literal notranslate"><span class="pre">mercure_complete.sh</span> <span class="pre">&lt;destination_folder&gt;</span> <span class="pre">&lt;target_name&gt;</span></code></p>
</section>
<section id="sftp">
<h2><a class="toc-backref" href="#id7" role="doc-backlink">SFTP</a><a class="headerlink" href="#sftp" title="Permalink to this heading"></a></h2>
<p>The SFTP target can be used to transfer files to remote servers using the SFTP protocol.</p>
<p>For SFTP targets, enter the hostname or IP, target folder on the server, username, and password.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>It is recommended to create a restricted user account for the SFTP uploads. Never use the credentials of an account with access to sensitive information, as the SFTP credentials are stored in the configuration file.</p>
</div>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>Support for SFTP transfers is still experimental and should be used with care.</p>
</div>
</section>
<section id="s3">
<h2><a class="toc-backref" href="#id8" role="doc-backlink">S3</a><a class="headerlink" href="#s3" title="Permalink to this heading"></a></h2>
<p>The S3 target allows transferring the DICOM files to S3-compatible cloud storage buckets (such as hosted by AWS).</p>
</section>
<section id="xnat">
<h2><a class="toc-backref" href="#id9" role="doc-backlink">XNAT</a><a class="headerlink" href="#xnat" title="Permalink to this heading"></a></h2>
<p>The XNAT target can be used to store studies on a server running the <a class="reference external" href="https://www.xnat.org/">XNAT imaging informatics platform</a>.</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="index.html" class="btn btn-neutral float-left" title="Usage" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="modules.html" class="btn btn-neutral float-right" title="Modules" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2019-2025 The &#34;mercure&#34; authors and contributors.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <div class="rst-versions">
</div><script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(false);
      });
  </script> 

</body>
</html>